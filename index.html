<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Slipstream Layout</title>
  <link rel="stylesheet" href="./styles.css" />
  <script type="module" src="./script.ts" defer></script>
</head>
<body class="min-h-screen bg-base-100 text-base-content" x-data="{ 
  leftSidebar: true, 
  rightSidebar: true,
  leftWidth: 320,
  rightWidth: 320,
  resizing: null,
  startX: 0,
  startWidth: 0,
  theme: 'system',
  startResize(side, e) {
    this.resizing = side;
    this.startX = e.clientX;
    this.startWidth = side === 'left' ? this.leftWidth : this.rightWidth;
    document.body.style.cursor = 'col-resize';
    document.body.style.userSelect = 'none';
  },
  doResize(e) {
    if (!this.resizing) return;
    const delta = this.resizing === 'left' ? (e.clientX - this.startX) : (this.startX - e.clientX);
    const newWidth = this.startWidth + delta;
    if (newWidth <= 5) {
      if (this.resizing === 'left') {
        this.leftSidebar = false;
        this.leftWidth = 320;
      } else {
        this.rightSidebar = false;
        this.rightWidth = 320;
      }
      this.stopResize();
      return;
    }
    if (this.resizing === 'left') {
      this.leftWidth = newWidth;
    } else {
      this.rightWidth = newWidth;
    }
  },
  stopResize() {
    this.resizing = null;
    document.body.style.cursor = '';
    document.body.style.userSelect = '';
  },
  cycleTheme() {
    if (this.theme === 'system') {
      this.theme = 'light';
      document.documentElement.setAttribute('data-theme', 'light');
      localStorage.setItem('theme', 'light');
    } else if (this.theme === 'light') {
      this.theme = 'dark';
      document.documentElement.setAttribute('data-theme', 'dark');
      localStorage.setItem('theme', 'dark');
    } else {
      this.theme = 'system';
      const systemTheme = window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
      document.documentElement.setAttribute('data-theme', systemTheme);
      localStorage.setItem('theme', 'system');
    }
  },
  initTheme() {
    const saved = localStorage.getItem('theme') || 'system';
    this.theme = saved;
    if (saved === 'system') {
      const systemTheme = window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
      document.documentElement.setAttribute('data-theme', systemTheme);
    } else {
      document.documentElement.setAttribute('data-theme', saved);
    }
  }
}" 
x-init="initTheme()"
@mousemove.window="doResize($event)"
@mouseup.window="stopResize()">
  <div class="min-h-screen flex">
    <aside
      class="hidden lg:flex lg:w-20 lg:flex-col lg:justify-between lg:border-r lg:border-base-300 lg:bg-base-200 lg:py-4 lg:px-2"
      aria-label="Workspace navigation"
    >
      <div class="flex flex-col items-center gap-3">
        <span class="text-[0.55rem] uppercase tracking-[0.4em] text-base-content/50">team</span>
        <button class="btn btn-ghost btn-square text-xl" aria-label="Home workspace">
          <span>✦</span>
        </button>
        <button class="btn btn-ghost btn-square text-lg" aria-label="Shared spaces">
          <span>⚙</span>
        </button>
        <button class="btn btn-ghost btn-square text-lg" aria-label="Boards">
          <span>≡</span>
        </button>
        <button class="btn btn-ghost btn-square text-lg" aria-label="Notifications">
          <span>!</span>
        </button>
      </div>
      <details class="dropdown dropdown-end dropdown-right px-1" data-profile-dropdown>
        <summary
          id="profile-toggle"
          aria-haspopup="true"
          aria-label="Profile menu"
          data-profile-toggle
          class="btn btn-ghost btn-circle avatar text-base-content">IV</summary>
          <ul
          id="profile-menu"
          role="menu"
          aria-label="Profile menu"
          data-profile-menu
            class="dropdown-content menu rounded-box z-21 mt-2 w-44 bg-base-100 p-2 shadow dropdown-bottom"
        >
          <li>
            <a role="menuitem">Profile</a>
          </li>
          <li>
            <a role="menuitem">Settings</a>
          </li>
          <li>
            <a role="menuitem">Sign out</a>
          </li>
        </ul>
      </details>
      
    </aside>

    <div class="flex flex-1 flex-col">
      <header
        class="sticky top-0 z-20 border-b border-base-300 bg-base-100/90 px-4 py-3 backdrop-blur"
      >
        <div class="flex items-center justify-between gap-4">
          <div class="flex items-center gap-3">
            <button 
              @click="leftSidebar = !leftSidebar" 
              class="btn btn-sm btn-ghost btn-square"
              aria-label="Toggle left sidebar"
            >
              <i x-show="leftSidebar" data-lucide="panel-left-close" class="w-4 h-4"></i>
              <i x-show="!leftSidebar" data-lucide="panel-left-open" class="w-4 h-4"></i>
            </button>
            <div class="text-xl font-semibold leading-tight">Slipstream</div>
            <span class="badge badge-outline badge-primary">Workspace</span>
          </div>
          <div class="flex items-center gap-2">
            <button class="btn btn-sm btn-ghost">Create</button>
            <button class="btn btn-sm btn-primary">Invite</button>
            <button 
              @click="cycleTheme()" 
              class="btn btn-sm btn-ghost btn-circle"
              aria-label="Toggle theme"
            >
              <ph-circle-half x-show="theme === 'system'" size="20"></ph-circle-half>
              <ph-sun x-show="theme === 'light'" size="20"></ph-sun>
              <ph-moon x-show="theme === 'dark'" size="20"></ph-moon>
            </button>
            <button 
              @click="rightSidebar = !rightSidebar" 
              class="btn btn-sm btn-ghost btn-square"
              aria-label="Toggle right sidebar"
            >
              <i x-show="rightSidebar" data-lucide="panel-right-close" class="w-4 h-4"></i>
              <i x-show="!rightSidebar" data-lucide="panel-right-open" class="w-4 h-4"></i>
            </button>
          </div>
        </div>
      </header>

      <div class="flex flex-1 overflow-hidden">
        <!-- Left Sidebar -->
        <aside 
          aria-label="Left sidebar"
          x-show="leftSidebar"
          x-transition:enter="transition-all ease-out duration-300"
          x-transition:enter-start="-ml-80 opacity-0"
          x-transition:enter-end="ml-0 opacity-100"
          x-transition:leave="transition-all ease-in duration-300"
          x-transition:leave-start="ml-0 opacity-100"
          x-transition:leave-end="-ml-80 opacity-0"
          :style="`width: ${leftWidth}px`"
          class="border-r border-base-300 bg-base-200 overflow-y-auto shrink-0 relative"
        >
          <div class="p-4 space-y-6">
            <section class="card bg-base-100 shadow rounded-lg">
              <div class="card-body">
                <h3 class="text-lg font-semibold">Pinned docs</h3>
                <div class="mt-4 flex flex-col gap-3">
                  <article class="flex items-center justify-between rounded-box border border-base-200 bg-base-100 p-3">
                    <div>
                      <p class="font-semibold">Product brief</p>
                      <p class="text-sm text-base-content/60">Strategy • 3 readers</p>
                    </div>
                    <button class="btn btn-xs btn-outline">Open</button>
                  </article>
                  <article class="flex items-center justify-between rounded-box border border-base-200 bg-base-100 p-3">
                    <div>
                      <p class="font-semibold">Launch retro</p>
                      <p class="text-sm text-base-content/60">Retro • 5 readers</p>
                    </div>
                    <button class="btn btn-xs btn-outline">Open</button>
                  </article>
                </div>
              </div>
            </section>

            <section class="card bg-base-100 shadow rounded-lg">
              <div class="card-body">
                <h3 class="text-lg font-semibold">Navigation</h3>
                <div class="menu bg-base-100 rounded-box">
                  <li><a>Dashboard</a></li>
                  <li><a>Projects</a></li>
                  <li><a>Team</a></li>
                  <li><a>Settings</a></li>
                </div>
              </div>
            </section>
          </div>
          <!-- Resize handle -->
          <div 
            data-resize-handle="left"
            @mousedown="startResize('left', $event)"
            class="absolute top-0 right-0 bottom-0 w-1 cursor-col-resize hover:bg-primary/50 transition-colors"
          ></div>
        </aside>

        <!-- Main Content Area -->
        <main aria-label="Main content area" class="flex-1 overflow-y-auto px-4 py-6 pb-24 space-y-6">
          <section class="card bg-base-100 shadow rounded-lg">
            <div class="card-body">
              <div class="flex items-center justify-between">
                <h2 class="text-lg font-semibold">Daily pulse</h2>
                <span class="text-xs text-base-content/70">Updated just now</span>
              </div>
              <p class="text-sm text-base-content/70">
                Keep an eye on the conversations, docs, and quick wins that keep the workspace moving.
              </p>
              <div class="mt-4 grid grid-cols-2 gap-4 sm:grid-cols-4">
                <div class="stat rounded-box border border-base-200 bg-base-100 p-3">
                  <div class="stat-title text-[0.7rem] text-base-content/60">Active docs</div>
                  <div class="stat-value text-lg">12</div>
                </div>
                <div class="stat rounded-box border border-base-200 bg-base-100 p-3">
                  <div class="stat-title text-[0.7rem] text-base-content/60">Live chats</div>
                  <div class="stat-value text-lg">4</div>
                </div>
                <div class="stat rounded-box border border-base-200 bg-base-100 p-3">
                  <div class="stat-title text-[0.7rem] text-base-content/60">Focus rooms</div>
                  <div class="stat-value text-lg">3</div>
                </div>
                <div class="stat rounded-box border border-base-200 bg-base-100 p-3">
                  <div class="stat-title text-[0.7rem] text-base-content/60">Unread</div>
                  <div class="stat-value text-lg">21</div>
                </div>
              </div>
            </div>
          </section>

          <section class="card bg-base-100 shadow rounded-lg">
            <div class="card-body">
              <h3 class="text-lg font-semibold">Recent Activity</h3>
              <div class="mt-4 space-y-4">
                <article class="rounded-box border border-base-200 bg-base-100 p-3">
                  <p class="text-sm text-base-content/70">You joined the #strategy channel.</p>
                </article>
                <article class="rounded-box border border-base-200 bg-base-100 p-3">
                  <p class="text-sm text-base-content/70">New task added to Sprint 12 board.</p>
                </article>
                <article class="rounded-box border border-base-200 bg-base-100 p-3">
                  <p class="text-sm text-base-content/70">Design review at 3:30 PM in Focus Room.</p>
                </article>
              </div>
            </div>
          </section>

          <section class="card bg-base-100 shadow rounded-lg">
            <div class="card-body">
              <h3 class="text-lg font-semibold">Content Section</h3>
              <p class="text-sm text-base-content/70">
                This is the main content area. It scrolls independently from the sidebars.
                Add your content here.
              </p>
            </div>
          </section>
        </main>

        <!-- Right Sidebar -->
        <aside 
          aria-label="Right sidebar"
          x-show="rightSidebar"
          x-transition:enter="transition-all ease-out duration-300"
          x-transition:enter-start="-mr-80 opacity-0"
          x-transition:enter-end="mr-0 opacity-100"
          x-transition:leave="transition-all ease-in duration-300"
          x-transition:leave-start="mr-0 opacity-100"
          x-transition:leave-end="-mr-80 opacity-0"
          :style="`width: ${rightWidth}px`"
          class="border-l border-base-300 bg-base-200 overflow-y-auto shrink-0 relative"
        >
          <!-- Resize handle -->
          <div 
            data-resize-handle="right"
            @mousedown="startResize('right', $event)"
            class="absolute top-0 left-0 bottom-0 w-1 cursor-col-resize hover:bg-primary/50 transition-colors"
          ></div>
          <div class="p-4 space-y-6">
            <section class="card bg-base-100 shadow rounded-lg">
              <div class="card-body">
                <h3 class="text-lg font-semibold">Activity feed</h3>
                <div class="mt-4 space-y-4">
                  <article class="rounded-box border border-base-200 bg-base-100 p-3">
                    <p class="text-sm text-base-content/70">You joined the #strategy channel.</p>
                  </article>
                  <article class="rounded-box border border-base-200 bg-base-100 p-3">
                    <p class="text-sm text-base-content/70">New task added to Sprint 12 board.</p>
                  </article>
                  <article class="rounded-box border border-base-200 bg-base-100 p-3">
                    <p class="text-sm text-base-content/70">Design review at 3:30 PM in Focus Room.</p>
                  </article>
                </div>
              </div>
            </section>

            <section class="card bg-base-100 shadow rounded-lg">
              <div class="card-body">
                <h3 class="text-lg font-semibold">Quick Actions</h3>
                <div class="space-y-2 mt-4">
                  <button class="btn btn-block btn-sm">New Document</button>
                  <button class="btn btn-block btn-sm">Start Chat</button>
                  <button class="btn btn-block btn-sm">Schedule Meeting</button>
                </div>
              </div>
            </section>
          </div>
        </aside>
      </div>

      <footer
        class="sticky bottom-0 z-20 border-t border-base-300 bg-base-100/90 px-4 py-3 backdrop-blur"
      >
        <div class="flex items-center justify-between text-sm text-base-content/70">
          <span>© 2025 Slipstream</span>
          <div class="flex gap-4">
            <span>Help</span>
            <span>Status</span>
          </div>
        </div>
      </footer>
    </div>
  </div>

  <nav class="lg:hidden fixed bottom-0 left-0 right-0 border-t border-base-300 bg-base-100/90 px-4 py-2 backdrop-blur">
    <div class="mx-auto flex max-w-md items-center justify-between">
      <button class="btn btn-ghost btn-square" aria-label="Home">
        <span>H</span>
      </button>
      <button class="btn btn-ghost btn-square" aria-label="Docs">
        <span>D</span>
      </button>
      <button class="btn btn-ghost btn-square" aria-label="Spaces">
        <span>S</span>
      </button>
      <button class="btn btn-ghost btn-square" aria-label="Notifications">
        <span>N</span>
      </button>
    </div>
  </nav>
</body>
</html>
